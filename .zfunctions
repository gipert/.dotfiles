rdocs() {
    if [[ "$1" == "TMath" ]]; then
        $BROWSER https://root.cern.ch/doc/v614/namespace$1.html
    else
        $BROWSER https://root.cern.ch/doc/v614/class$1.html
    fi
}

ssh() {
    if [[ `uname` == "Darwin" ]]; then
        command ssh -F ~/.ssh/config.mac "$@"
    elif [[ `hostname` == "lxpertoldi.pd.infn.it" ]]; then
        if [[ $@ == "gerda-lngs" ]]; then
            command sshpass -f ~/.secrets ssh -F ~/.ssh/config.linux gerda-lngs
        else
            command ssh -F ~/.ssh/config.linux "$@"
        fi
    else
        command ssh -F ~/.ssh/config.linux "$@"
    fi
}

rsync() {
    if [[ `uname` == "Darwin" ]]; then
        command rsync --progress --rsh="ssh -F $HOME/.ssh/config.mac" "$@"
    elif [[ `hostname` == "lxpertoldi.pd.infn.it" ]]; then
        if [[ `echo "$@" | grep -Eq '^gerda-lngs*'` -eq 0 ]]; then
            command rsync --progress --rsh="sshpass -f $HOME/.secrets ssh -F $HOME/.ssh/config.linux" "$@"
        else
            command rsync --progress --rsh="ssh -F $HOME/.ssh/config.linux" "$@"
        fi
    else
        command rsync --progress --rsh="ssh -F $HOME/.ssh/config.linux" "$@"
    fi
}

mvim() {
    sed "s|Plug 'Valloric/YouCompleteMe'|\" Plug 'Valloric/YouCompleteMe'|g" ~/.vimrc > /tmp/minimal-vimrc
    vim -u /tmp/minimal-vimrc "$@"
}

docker2sing() {
    docker run \
        -v /var/run/docker.sock:/var/run/docker.sock \
        -v $PWD:/output \
        --privileged -t --rm \
        singularityware/docker2singularity --name "image" $1 && \
    sudo chown `whoami`:`id -gn` "image.simg" && \
    mv image.simg $2
}

docker() {
    if [[ "$1" == "run" ]]; then
        command docker run -v $HOME:$HOME -w $PWD --rm -it "${@:2}"
    elif [[ "$1" == "build" ]]; then
        command docker build --rm "${@:2}"
    else
        command docker "$@"
    fi
}

dockerX11() {
    if [[ "$1" == "run" ]]; then
        ip=`ifconfig en0 | grep inet | awk '$1=="inet" {print $2}'`
        xhost +$ip
        docker run -e DISPLAY=$ip:0 -v /tmp/.X11-unix:/tmp/.X11-unix "${@:2}"
        if [[ `command docker ps -a -q` == "" ]]; then
            xhost -$ip
        fi
    else
        docker "$@"
    fi
}

# vim: syntax=sh
